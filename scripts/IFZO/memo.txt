#!/bin/sh
#***********************************************************************************
# 説明：                                                                          **
# 　システムバックアップ取得スクリプト                                            **
# 　NFSマウントしたディレクトリに作成済みの、バックアップ先ディレクトリを指定し   **
# 　パーティションの形式が"83"のパーティションのdumpを取得する。                  **
# 前提：                                                                          **
# 　システムバックアップディレクトリがNFSマウントされていること                   **
# 　バックアップ対象は/dev/sda                                                    **
#                                                                                 **
# 使い方：                                                                        **
# 　backup.sh <pre_backup.shで作成済みのバックアップ先ディレクトリ名>             **
# 変数：                                                                          **
#                                                                                 **
# 引数：                                                                          **
# 　第1引数(任意)：　pre_backup.shで作成されたバックアップ先ディレクトリ名を指定  **
#***********************************************************************************

#***********************************************************************************
# 前提：                                                                          **
# 　リカバリ対象の内部ディスクが/dev/sdaで認識されていること                      **
# 　リカバリ対象の内部ディスクは全てext3構成かつLVM構成が含まれていないこと       **
# 　リカバリ対象のswap領域は1つであること                                         **
# 　バックアップ対象ディレクトリに"blkid"コマンドの出力結果があること             **
# 　リカバリするパーティションのdump情報のファイル名は下記の書式であること        **
# 　　"パーティション名.dump(例：sda1.dump)"                                      **
# 　システムバックアップディレクトリがNFSマウントされていること                   **
#                                                                                 **
# 使い方：                                                                        **
# 　restore.sh <リカバリ元ディレクトリ名> <リストア先マウントポイント>            **
# 　必要に応じて下記変数を変更する。                                              **
# 変数：                                                                          **
# 　RESTORE_DIR  ：リストア対象になるマウントポイント                             **
# 　AFTER_SCRIPT ：chroot後実行スクリプト名                                       **
# 　SFDISK_TXT   ：sfdisk -lコマンド出力結果ファイル名                            **
# 　BLKID    ：blkidコマンド出力結果ファイル名                                    **
#                                                                                 **
# 引数：                                                                          **
# 　第1引数 リカバリするバックアップ情報を格納したディレクトリ名                  **
# 　第2引数 リカバリ先とするマウントポイント                                      **
#***********************************************************************************

#***********************************************************************************
#** 説明：                                                                        **
#** 　システムリストア時のchroot後の処理を実行するスクリプト。                    **
#** 　restore.shにてリカバリ先の領域にコピーされる。                              **
#** 　処理実行後はrestore.shにて消去される。                                      **
#**                                                                               **
#** 前提：                                                                        **
#** 　リストア後のファイルシステムに/tmpディレクトリが存在していること            **
#**                                                                               **
#** 使い方：                                                                      **
#** 　after_chroot.sh <リカバリ前のblkid出力結果ファイル名>                       **
#** 変数：                                                                        **
#**                                                                               **
#** 引数：                                                                        **
#** 　第1引数：リカバリ前のラベル情報(blkid出力結果ファイル名)                    **
#**                                                                               **
#***********************************************************************************

#***********************************************************************************
# 説明：                                                                        **
# 　システムバックアップ取得前構成情報収集スクリプト                            **
# 　NFSマウントしたディレクトリに、日付名のディレクトリを作成し                 **
# 　構成情報を取得する。                                                        **
# 前提：                                                                        **
# 　システムバックアップディレクトリがNFSマウントされていること                 **
# 　バックアップ対象は/dev/sda                                                  **
#                                                                               **
# 使い方：                                                                      **
# 　pre_backup.sh                                                               **
# 変数：                                                                        **
#                                                                               **
# 引数：                                                                        **
# 　第1引数(任意)：　バックアップを取得するディレクトリ名を指定                 **
# 　　　　　　　　　 指定しない場合は実行日(YYYYMMDD)となる                     **
#***********************************************************************************

http://downloadcenter.intel.com/Detail_Desc.aspx?agr=Y&DwnldID=18725&lang=jpn&wapkw=intel+proset